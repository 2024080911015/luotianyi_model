# 洛天依桌面助手

一个可爱的洛天依桌面宠物应用，可以在Windows桌面上显示一个交互式的Q版洛天依。

## 功能特点

- 🎨 **动态生成精灵**: 代码实时绘制Q版洛天依形象
- 🖱️ **完全交互**: 拖拽、点击、悬停互动
- 💬 **智能对话**: 随机对话、时间问候、鼓励话语
- 🎭 **多种状态**: 站立、行走、坐下、睡觉、开心、惊讶
- 🫧 **气泡对话**: 显示可爱的对话气泡
- 🎵 **声音反馈**: 互动时有声音效果
- 🎨 **透明窗口**: 始终置顶，不影响其他工作
- ⚙️ **可配置**: 右键菜单调整大小和设置

## 安装要求

- Windows 7/8/10/11
- Python 3.7+
- 管理员权限（首次运行可能需要）

## 快速开始

1. **安装依赖**:
```bash
pip install -r requirements.txt
```

2. **运行程序**:
```bash
python main.py
```

3. **或直接运行**:
```bash
双击 run.bat
```

## 使用方法

### 基本操作
- **左键拖拽**: 移动洛天依到桌面任意位置
- **右键点击**: 打开设置菜单
- **鼠标悬停**: 触发互动反应
- **ESC键**: 退出程序

### 洛天依行为
- 自动在桌面走动、坐下、睡觉
- 随机说话和卖萌
- 根据时间问候（早上好、晚安等）
- 点击时有不同反应

### 右键菜单功能
- **说话**: 让洛天依随机说一句话
- **调整大小**: 小(150px)、中(200px)、大(250px)
- **关于**: 显示程序信息
- **退出**: 关闭程序

## 项目结构

```
luotianyi-desktop-pet/
├── main.py              # 主程序入口
├── requirements.txt     # Python依赖
├── run.bat             # Windows启动脚本
├── README.md           # 说明文档
└── src/
    ├── character_generator.py  # 洛天依精灵生成器
    ├── desktop_pet.py          # 桌面宠物核心逻辑
    └── interaction.py          # 交互系统
```

## 技术细节

### 使用的库
- **pygame**: 图形渲染和窗口管理
- **PIL/Pillow**: 图像生成和处理
- **pywin32**: Windows API调用（透明窗口、置顶）
- **numpy**: 数学计算支持

### 精灵生成
- 完全代码生成，无需外部图片
- 支持6种状态：站立、行走、坐下、睡觉、开心、惊讶
- 实时动画效果（走路摇摆、表情变化）

### 窗口特性
- 无边框透明窗口
- 始终置顶显示
- 支持多显示器
- 内存占用低（~50MB）

## 自定义

### 添加对话
编辑 `src/interaction.py` 中的 `DialogSystem` 类，添加新的对话类别：

```python
self.dialogs["new_category"] = [
    "新的对话1",
    "新的对话2",
    # ...
]
```

### 修改外观
编辑 `src/character_generator.py` 中的绘制函数，调整颜色、大小和形状。

### 添加声音
将声音文件(.wav)放入 `sounds/` 目录，并在 `SoundManager` 中注册。

## 常见问题

### Q: 程序无法启动
**A**: 确保已安装所有依赖：`pip install -r requirements.txt`

### Q: 窗口不透明或无法置顶
**A**: 以管理员身份运行程序，或检查杀毒软件/防火墙设置

### Q: 没有声音
**A**: 检查系统音量，或程序是否被静音

### Q: 如何完全卸载
**A**: 删除项目文件夹即可，无注册表修改

## 开发计划

- [ ] 添加更多洛天依服装和发型
- [ ] 实现天气API集成
- [ ] 添加日程提醒功能
- [ ] 支持自定义快捷键
- [ ] 添加更多互动动画
- [ ] 实现多语言支持

## 许可证

MIT License

## 致谢

- 感谢 VOCALOID 和 上海禾念 创造的洛天依形象
- 感谢所有开源库的开发者
- 感谢用户的支持和反馈

---

**温馨提示**: 本程序仅为娱乐和学习目的，洛天依形象版权归相关权利方所有。